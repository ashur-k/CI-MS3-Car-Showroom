{% extends 'admin_base.html' %}

 {% block content %}
<div class="container admin-dashboard-container">
    <div class="row grey darken-4 valign-wrapper">
        <h3 class="white-text"><i class="fas fa-money-check red-text"></i> All sold cars are here</h3>
    </div><hr class="container-bottom-hr-styling">


{% with errors = get_flashed_messages(category_filter=["delete_flash"]) %}
{% if errors %}
<div class="row alert-message block-message error">
  
 
    {%- for msg in errors %}
    <p class="lead" style="color:green; font-weight::bold;">{{ msg }}</p>
    {% endfor -%}
  
 </div><hr>
{% endif %}
{% endwith %}
<table id="sold-cars">
        <thead>
          <tr>
              <th>Client Name</th>
              <th>Car Registration</th>
              <th>Client Phone</th>
              <th>Operations</th>
          </tr>
        </thead>


{% for cars in sold_cars %}
    <tbody>  
    <tr>
        <td>{{cars.full_name}}</td>
        <td>{{cars.reg_num}}</td>
        <td>{{cars.phone}}</td>
        <td>
            <a class="btn waves-effect waves-red admin-secondary-custom-buttons" href="{{url_for('client_blueprint.sold_car_info', reg_num=cars.reg_num)}}">
                <i class="fas fa-info-circle red-text"></i> See all info
            </a>
            <a class="btn waves-effect waves-red admin-secondary-custom-buttons modal-trigger" href="#modal{{ cars._id }}">
                <i class="fas fa-trash-alt red-text"></i> Delete info
            </a>
        </td>
    </tr>
        <div class="modal" id="modal{{ cars._id }}">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="modal{{ cars._id }}Label">Delete Record</h4>
                     <p>Are you sure you wan't to delete client, once client is
                      deleted from here we will no longer have any information about this client and car.</p>
                </div>
            <div class="modal-footer">
                <button type="button" class="modal-close teal white-text waves-effect waves-green btn-flat">Close</button>
                <a class="btn btn-danger" href="{{url_for('client_blueprint.delete_sold_car', car_id=cars._id)}}">Delete: {{ cars.full_name }}</a>
            </div>
            </div>
        </div>
    </tbody>
  {% endfor %}   

     
</table>
<div class="row">
    <div class="col s12">
        <a href="{{url_for('admin.admin_homepage')}}" class="waves-effect waves-light btn admin-custom-buttons">
        <i class="fas fa-hand-point-left red-text"></i> Go back to Admin dashboard</a>
    </div>
</div>


 {% endblock %}