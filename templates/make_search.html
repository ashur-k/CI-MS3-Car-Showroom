{% extends 'base.html' %} 
 {% block admin_content %}
   
      <ul class="navbar-nav mr-auto">  
        <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Manage Cars</a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="{{url_for('add_car_company')}}">Add Car Make/Model</a>
                <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="{{url_for('update_car_info')}}">Edit existing Car Make/Model/info</a>
        </div>
      </li> 
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="add_new_car" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Add new car
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
        {% for results in admin_cars_make %}
        <a class="dropdown-item" href="{{url_for('add_new_car', car_make=results.car_make)}}">{{results.car_make}}</a>
        <div class="dropdown-divider"></div>
       {% endfor %}
        </div>
      </li>
    </ul>
    <form action="{{ url_for('search') }}" method="POST" class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" id="search" name="search" type="search" placeholder="Search" aria-label="Search" required>
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>

{%endblock%}

{% block content %}

<!--Car make results found row-->
  {% if car_make_results %}
<div class="container p-2">
<hr>
<h3 >Car seached in car make: {{ car_make_search.car_make }}</h3><hr>
<!--Make results found row-->
<div class="row">
   {% for result in car_make_results %}
   
<div class="col-md-6 mt-4">
<div class="card" style="width: 18rem;">
  <img src="{{ result.car_image_url }}" class="card-img-top" alt="...">
  <div class="card-body">
    <h5 class="card-title">Car Make: {{result.car_make}}</h5>  
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">Car Model:<strong><mark>{{result.car_model}}</mark></strong></li>
    <li class="list-group-item">Reg Num: <strong><mark>{{result.reg_num}}</mark></strong></li>
    <li class="list-group-item">Reg Year:<strong><mark>{{result.registration_year}}</mark></strong></li>
  </ul>
  <div class="card-body">
  <div class="row">
 <form action="{{url_for('update_options')}}" method="POST" id="make_search_form" name="make_search_form">
  <input type="hidden" id="car_make" name="car_make" value="{{result.car_make}}">
  <input type="hidden" id="car_model" name="car_model" value="{{result.car_model}}">
  <input type="hidden" id="reg_num" name="reg_num" value="{{result.reg_num}}">
    <div class="col-md-4 p-1"><button class="btn btn-primary btn-sm" type="submit">Update</button> </div>
  </form>
    
    <div class="col-md-4 p-1"> <a href="{{url_for('view', car_id=result._id)}}" class="btn btn-primary btn-sm">View Car</a></div>
    <div class="col-md-4 p-1"> <a href="#" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#deleteModal">Delete car</a></div>
  </div>
  </div>
</div>
    </div>
    <!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Delete Record</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
     <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        
        <a class="btn btn-danger" href="{{ url_for('delete_car', car_id=result._id, reg_num=result.reg_num ) }}" >Delete: {{ result.reg_num }}</a>
       
      </div>
    </div>
  </div>
</div>

            {% endfor %}
    </div>
  </div>
  <!--For no results in make results found row-->
  {% elif car_make_search %}
  <div class="container p-4">
<div class="row">
    <h3>There are no cars available in the car make: {{ car_make_search.car_make }}</h3>
    
    </div>
</div>
  <!--Registration results found row-->
{% elif reg_results %}
<div class="container p-2">
<hr>
<h3 >Car seached in car make: {{ reg_results.car_make }}</h3><hr>
<div class="row">   
<div class="col-md-6 mt-4">
<div class="card" style="width: 18rem;">
  <img src="{{ reg_results.car_image_url }}" class="card-img-top" alt="...">
  <div class="card-body">
    <h5 class="card-title">Car Make: {{reg_results.car_make}}</h5>  
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">Car Model:<strong><mark>{{reg_results.car_model}}</mark></strong></li>
    <li class="list-group-item">Reg Num: <strong><mark>{{reg_results.reg_num}}</mark></strong></li>
    <li class="list-group-item">Reg Year:<strong><mark>{{reg_results.registration_year}}</mark></strong></li>
  </ul>
  <div class="card-body">
  <div class="row">
 <form action="{{url_for('update_options')}}" method="POST"  name="make_search_form">
  <input type="hidden"  name="car_make" value="{{reg_results.car_make}}">
  <input type="hidden"  name="car_model" value="{{reg_results.car_model}}">
  <input type="hidden"  name="reg_num" value="{{reg_results.reg_num}}">
    <div class="col-md-4 p-1"><button class="btn btn-primary btn-sm" type="submit">Update</button> </div>
  </form>
    
    <div class="col-md-4 p-1"><a href="{{url_for('view', car_id=reg_results._id)}}" class="btn btn-primary btn-sm">View Car</a></div>
    <div class="col-md-4 p-1"> <a href="#" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#deleteModal">Delete Car</a></div>
  </div>
  </div>
</div>
    </div>
    </div>
  </div>
  <!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Delete Record</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
     <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        
        <a class="btn btn-danger" href="{{ url_for('delete_car', car_id=reg_results._id, reg_num=reg_results.reg_num ) }}" >Delete: {{ reg_results.reg_num }}</a>
       
      </div>
    </div>
  </div>
</div>
  <!--Model results found row-->
   {% elif model_results %} 
   <div class="container p-2">
<hr>
<h3 >Car seached in car Model: {{ car_model_search.car_model}}</h3><hr>

<div class="row">
   {% for result in model_results %}
 
<div class="col-md-6 mt-4">
<div class="card" style="width: 18rem;">
  <img src="{{ result.car_image_url }}" class="card-img-top" alt="...">
  <div class="card-body">
    <h5 class="card-title">Car Make: {{result.car_make}}</h5>  
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">Car Model:<strong><mark>{{result.car_model}}</mark></strong></li>
    <li class="list-group-item">Reg Num: <strong><mark>{{result.reg_num}}</mark></strong></li>
    <li class="list-group-item">Reg Year:<strong><mark>{{result.registration_year}}</mark></strong></li>
  </ul>
  <div class="card-body">
  <div class="row">
 <form action="{{url_for('update_options')}}" method="POST" name="make_search_form">
  <input type="hidden" name="car_make" value="{{result.car_make}}">
  <input type="hidden" name="car_model" value="{{result.car_model}}">
  <input type="hidden"  name="reg_num" value="{{result.reg_num}}">
    <div class="col-md-4 p-1"><button class="btn btn-primary btn-sm" type="submit">Update</button> </div>
  </form>
    
    <div class="col-md-4 p-1"><a href="{{url_for('view', car_id=result._id)}}" class="btn btn-primary btn-sm">View Car</a></div>
    <div class="col-md-4 p-1"> <a href="#" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#deleteModal">Delete Car</a></div>
  </div>
  </div>
</div>
    </div>
     <!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Delete Record</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
     <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        
        <a class="btn btn-danger" href="{{ url_for('delete_car', car_id=result._id, reg_num=result.reg_num ) }}" >Delete: {{ result.reg_num }}</a>
       
      </div>
    </div>
  </div>
</div>
 {% endfor %}
 </div>
  </div>
    {% elif car_model_search %} 

 <div class="container p-4">
<div class="row">
    <h3>There are no cars available in the car model: {{ car_model_search.car_model}}</h3>
    
    </div>
</div>

    {% else %}
     <div class="container p-4">
<div class="row">
    <h3>No results found in search you made.</h3>
    
    </div>
</div>

{% endif %}


{%endblock%}

 
 